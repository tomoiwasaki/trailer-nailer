<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Trailer Nailer</title>

<link rel="stylesheet" href="game-screen.css" type="text/css" />

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>

<nav class="navbar navbar-default">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Trailer Nailer</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#">My Profile <span class="sr-only">(current)</span></a></li>
          <li> <a href="#">My Friends</a></li>
          <li><a href="#">Play!</a></li> 
        </ul>

      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<script src="jquery-3.1.1.min.js"></script>
<script>
    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    $.get('http://trailer-nailer.herokuapp.com/movies', function(data) {
      var player;
      var allVideos = data;
      console.log(allVideos);
      var videoid = 'JhvrQeY3doI';
      var vidduration;

      var youTubeURL = 'https://www.googleapis.com/youtube/v3/videos?id='+videoid+'&part=contentDetails&key=AIzaSyC6odj3vLS1mLL9a4y30b46gNIQXyRzoXI';


      function onYouTubeIframeAPIReady() {
        start = Math.floor(Math.random() * 30) + 15;
        end = start + 10;

          player = new YT.Player('video', {
            height: '350',
              width: '640',
              videoId: 'JhvrQeY3doI',
              playerVars: {
                autoplay: '1',
                controls: '0',
                showinfo: '0',
                start: start,
                end: end
            },
              events: {
                'onReady': onPlayerReady,
              }
          });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {     
        event.target.playVideo();
      }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;

      function stopVideo() {
          player.stopVideo();
      }
    });
    
</script>
<h1 id="title">Which movie is this?</h1>

<div> <span id="time"></span> </div>

<div class="holder">
     <div id="video"></div>
     <div class="bar" id="bottom-layer">.</div>
</div>

<div id="choices">
	<button onclick="notscore()">Finding Nemo</button>
	<button onclick="notscore()">Zootopia</button>
	<button onclick="notscore()">Reef</button>
	<button onclick="plusscore()">Finding Dory</button>
</div>

<h3 id="score"> Score: 0 </h3> 

<script type="text/javascript">
	var score = 0;
	function notscore(){
		document.getElementById("score").innerHTML = "Score: " + score;
		onYouTubeIframeAPIReady();
	}
	function plusscore(){
		score++;
		document.getElementById("score").innerHTML = "Score: " + score;
		onYouTubeIframeAPIReady();
	}
</script>


<script type="text/javascript">
	function startTimer(duration, display) {
    	var timer = duration, minutes, seconds;
    	setInterval(function () {
        	minutes = parseInt(timer / 60, 10); 
        	seconds = parseInt(timer % 60, 10);

        	minutes = minutes < 10 ? minutes : minutes;
        	seconds = seconds < 10 ? "0" + seconds : seconds;

            display = document.getElementById("time");
            display.innerHTML = "Time Left: " + minutes + ":" + seconds;

            if(minutes == 0 && seconds == 0) {
                display.innerHTML = "Time's up!";
                return;
            }

        	if (--timer < 0) {
            	timer = duration;
        	}
    	}, 1000); // how fast timer runs
	}

	window.onload = function () {
    	var oneMinute = 60,
        display = document.querySelector('#time');
    	startTimer(oneMinute, display);
	};

	</script>
</body>
</html>	
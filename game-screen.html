<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Recognisong</title>
<link rel="stylesheet" href="game-screen.css" type="text/css" />
</head>

<body>
<script>
    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;
    var videoid = 'JhvrQeY3doI';

    var youTubeURL = 'http://gdata.youtube.com/feeds/api/videos/'+videoid+'?v=2&alt=json';
	var json = (function () {
    	$.ajax({
        	'async': false,
        	'global': false,
        	'url': youTubeURL,
        	'dataType': "jsonp", // necessary for IE9
        	crossDomain: true,
        	'success': function (data) {
            	var duration = data.entry.media$group.yt$duration.seconds;
        	}
    	});
	})();

	console.log(json);

    function onYouTubeIframeAPIReady() {

   	    player = new YT.Player('video', {
     	    height: '350',
            width: '640',
            videoId: 'JhvrQeY3doI',
            playerVars: {
            	autoplay: '1',
            	controls: '0',
            	showinfo: '0'
        	},
            events: {
            	'onReady': onPlayerReady,
            	'onStateChange': onPlayerStateChange
          	}
        });
    }

    // 4. The API will call this function when the video player is ready.
    function onPlayerReady(event) {
        event.target.playVideo();
    }

    // 5. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;
    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
    }
    function stopVideo() {
        player.stopVideo();
    }
</script>
<h1 id="title">Which movie is this?</h1>

<div> Time left: <span id="time"></span> </div>

<div class="holder">
     <div id="video"></div>
     <div class="bar" id="bottom-layer">.</div>
</div>

<div id="choices"></div>

<script type="text/javascript">
	function startTimer(duration, display) {
    	var timer = duration, minutes, seconds;
    	setInterval(function () {
        	minutes = parseInt(timer / 60, 10);
        	seconds = parseInt(timer % 60, 10);

        	minutes = minutes < 10 ? minutes : minutes;
        	seconds = seconds < 10 ? "0" + seconds : seconds;

        	display.textContent = minutes + ":" + seconds;

        	if (--timer < 0) {
            	timer = duration;
        	}
    	}, 1000); // how fast timer runs
	}

	window.onload = function () {
    	var oneMinute = 60,
        display = document.querySelector('#time');
    	startTimer(oneMinute, display);
	};
	</script>

</body>
</html>	